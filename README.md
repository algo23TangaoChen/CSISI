# CSISI
国信证券研报CSISI模型复刻

## 目录

- [背景](#背景)
- [安装](#安装)
- [投资者情绪模型的构造](#投资者情绪模型的构造)
- [GSISI择时模型设计和实证分析](#GSISI择时模型设计和实证分析)
- [相关项目（可选）](#相关项目)
- [主要项目负责人](#主要项目负责人)


## 背景

根据CAPM模型，行业beta反映行业的系统性风险。在有效市场假说下，行业的预期超额收益率与beta正相关。但是真实市场当中的投资者往往受到自身的主观情绪影响，很难做到高度理性的决策。
例如，对于一个高beta的行业，投资者基于深度的行业研究或者是拍脑袋决策，得出对该行业发展乐观的态度，他们对该行业有正的超额收益，于是会选择投资该行业；反之，投资者若对该行业持
悲观态度，则会有负的预期超额收益，于是会减持该行业。

从长期的角度来看，资产的风险和收益之间的相关性可以测度投资者的风险偏好程度。A.D.Persaud 因为在金融领域的诸多创新而为众人所知，其在研究货币市场时，发明了一种度量投资者风险偏好
的良好方法——风险偏好指数(Risk AppetiteIndex)。基本方法是在度量资产的风险与收益之间的相关系数的基础上设计了风险偏好指数。若风险和收益正相关，说明投资者的风险偏好水平较高；
反之，风险与收益负相关，投资者是风险厌恶的，倾向于避险。

而从短期视角来看，资产的风险和收益之间的相关性则体现了投资者对市场的情绪，我们可以利用投资者情绪进行择时。与风险偏好类似，风险和收益正相关，说明投资者风险偏好程度高，那么投资
者对市场的观点应该是乐观的；反之，投资者倾向于避险说明投资者对市场持悲观态度。当市场处于低位，投资者普遍持乐观态度时，应该加紧买入资产；反之，市场处于高位，投资者对市场走势
持悲观态度，应该卖出资产套利。


## 安装

安装backtest_toolkit库，运行ipynb即可。


## 投资者情绪模型的构造

### 基本思路
首先计算31个申万一级行业滚动5天的收益率及其相对沪深300的beta系数分别作为其周收益率和周beta系数；然后测算31个申万行业周收益率及其
周beta系数的Spearman秩相关系数；最后以Spearman秩相关系数为基础构建国信投资者情绪指数GSISI。

### 相关性分析

由于申万行业的周收益率和行业beta的分布未知，选用Spearman秩相关系数来测度二者相关性

一般而言，对于双变量(X,Y)相关分析，通常的方法为Pearson 矩相关系数和Spearman 秩相关系数等。Pearson 矩相关常常用于双变量正态分布的数据，
Spearman 秩相关适用于等级数据、非双变量正态分布的数据以及分布不确定的数据。

Spearman 秩相关系数性质：

(1)若两个变量(X,Y)的排序是完美的，即两个排序是完全相同的，则Spearman
秩相关系数为1；

(2)若两个变量(X,Y)的排序是完全分歧， 即一个排序是扭转其它排序，则Spearman 秩相关系数为-1；

(3)若Spearman 秩相关系数的值属于(-1,1)之间，则其绝对值增加意味着排序程度在增加；

(4)若两个变量(X,Y)的排序是完全独立的，则Spearman 秩相关系数为0。

### Beta系数计算

基础数据：计算31个申万一级行业周收益率序列和沪深300 指数每周收益率序列

时间周期：2014年1月2日至2023年1月10日

滑动窗口：100周数据

运用Fama-Macbeth回归滚动计算31个申万行业的周beta系数，得到31个申万一级行业的Beta系数时间序列。鉴于每个申万一级行业样本可能存在回归误差的截面
相关性，本文将回归方程标准误进行White-Newey调整，同时加入截距项控制各个行业的个体固定效应，从而使Beta系数成为纯风险因子。


### 投资者情绪指数设计

如上所述，Beta 系数衡量申万一级行业相对沪深300 指数的波动性，而Spearman 秩相关系数度量申万一级行业的Beta 系数和其收益率之间的等级相
关性。即Spearman 秩相关系数度量的是当所有申万一级行业的Beta 系数按照大小排序(即行业Beta 轮动)时，其收益率的大小排序(即行业收益率轮动)能保
持与Beta 系数排序(即行业Beta 轮动)一致性的程度和方向。这种一致性的程度和方向体现投资者悲观或乐观程度，即投资者情绪。因此，我们发现以下规
律：

(1)当两个变量(申万一级行业的Beta 系数和收益率)排序一致性程度上升，方向相同，rho >= 0 ，表示投资乐观情绪上扬；

(2)当两个变量(申万一级行业的Beta 系数和收益率)排序一致性程度上升，方向相反， rho <= 0，表示投资悲观情绪蔓延。

对Spearman秩相关系数进行显著性检验，查表可知，alpha=0.05，n=31时，临界值为0.301。将通过显著性检验的Spearman秩相关系数记为rho_a, 
GSISI指数设计为：GSISI = 100 * rho_a 

因此，GSISI时间序列可分为三种情况：

(1) GSISI >= 30.1时， 投资者乐观情绪上扬；

(2) GSISI <= -30.1时， 投资者悲观情绪蔓延；

(3) GSISI指数介于上述两组之间时，投资者情绪处于中性。

GSISI指数与沪深300指数走势对比见GSISI模型.ipynb


## GSISI择时模型设计和实证分析

### 模型设计

基于GSISI指数设计择时模型。

基本思路：

若GSISI连续两次发出看多(或看空)信号,则看多(或看空)沪深300指数,且保持这个判断,直到连续两次看空(或看多)信号出现,则发生看空(或看多)
沪深300指数的反转判断;若GSISI发出多空交叉互现信号,则除最新信号外,前面的交叉信号作废,以最新信号为判断起点,按照前面两条准则重新分析
后面的信号。

具体步骤是:

1.若国信投资者情绪指数GSISI>30.1 ，则作为看多沪深300的一次警示信号.若紧接着再次GSISI>30.1 ，则作为看多沪深300的确认信号,正式看多
沪深300,一次判断完成,且保持此判断,直到有相反的判断出现.若紧接着GSISI<-30.1 ,则看多沪深300的一次警示信号作废,以此最新的信号为判断起点,进行下一轮的判断.

2.类似地,若国信投资者情绪指数GSISI<-30.1 ，则作为看空沪深300的一次警示信号.若紧接着再次GSISI<-30.1 ,则作为看空沪深300的确认信号,
正式看空沪深300,一次判断完成,且保持此判断,直到有相反的判断出现.若紧接着 ,则看空沪深300的一次警示信号作废,以此最新的信号为判断起点,
进行下一轮的判断.

### 实证分析

通过观察GSISI信号与沪深300的走势图，我们可以发现GSISI择时模型的效果并不理想。模型对2015年的股灾导致的指数下滑反应迟钝，对2021年的
指数高位也不敏感，只能等待指数走至预先设置的高仓位触发平仓避险机制来规避指数变动风险。

初步分析模型失灵的原因在于2015年股灾之后投资者群体的结构改变。2015年股灾之后大量投资者退出市场，导致A股市场成交量低迷。投资者基数缩小
导致测算市场情绪的样本数量急剧下降，随着主力暂时离场，交易对手方变为散户为主，严重影响市场情绪信号的准确性。


## 相关项目
  无
  


## 主要项目负责人
  陈瑭澳 Github：algo23TangaoChen
